{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Browser_process, _Browser_closeCallback, _Browser_connection;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = void 0;\nconst Browser_js_1 = require(\"../../api/Browser.js\");\nconst BrowserContext_js_1 = require(\"./BrowserContext.js\");\n/**\n * @internal\n */\nclass Browser extends Browser_js_1.Browser {\n  /**\n   * @internal\n   */\n  constructor(opts) {\n    super();\n    _Browser_process.set(this, void 0);\n    _Browser_closeCallback.set(this, void 0);\n    _Browser_connection.set(this, void 0);\n    __classPrivateFieldSet(this, _Browser_process, opts.process, \"f\");\n    __classPrivateFieldSet(this, _Browser_closeCallback, opts.closeCallback, \"f\");\n    __classPrivateFieldSet(this, _Browser_connection, opts.connection, \"f\");\n  }\n  /**\n   * @internal\n   */\n  static async create(opts) {\n    // TODO: await until the connection is established.\n    await opts.connection.send('session.new', {});\n    return new Browser(opts);\n  }\n  async close() {\n    var _a;\n    await ((_a = __classPrivateFieldGet(this, _Browser_closeCallback, \"f\")) === null || _a === void 0 ? void 0 : _a.call(null));\n    __classPrivateFieldGet(this, _Browser_connection, \"f\").dispose();\n  }\n  isConnected() {\n    return !__classPrivateFieldGet(this, _Browser_connection, \"f\").closed;\n  }\n  process() {\n    var _a;\n    return (_a = __classPrivateFieldGet(this, _Browser_process, \"f\")) !== null && _a !== void 0 ? _a : null;\n  }\n  async createIncognitoBrowserContext(_options) {\n    return new BrowserContext_js_1.BrowserContext(__classPrivateFieldGet(this, _Browser_connection, \"f\"));\n  }\n}\nexports.Browser = Browser;\n_Browser_process = new WeakMap(), _Browser_closeCallback = new WeakMap(), _Browser_connection = new WeakMap();","map":{"version":3,"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA;AAQA;AAEA;;;AAGA,MAAaA,OAAQ,SAAQC,oBAAW;EActC;;;EAGAC,YAAYC,IAAa;IACvB,KAAK,EAAE;IARTC;IACAC;IACAC;IAOEC,2BAAI,oBAAYJ,IAAI,CAACK,OAAO;IAC5BD,2BAAI,0BAAkBJ,IAAI,CAACM,aAAa;IACxCF,2BAAI,uBAAeJ,IAAI,CAACO,UAAU;EACpC;EArBA;;;EAGA,aAAaC,MAAM,CAACR,IAAa;IAC/B;IACC,MAAMA,IAAI,CAACO,UAAU,CAACE,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;IAC9C,OAAO,IAAIZ,OAAO,CAACG,IAAI,CAAC;EAC1B;EAgBS,MAAMU,KAAK;;IAClB,OAAM,iCAAI,8BAAe,0CAAEC,IAAI,CAAC,IAAI,CAAC;IACrCC,2BAAI,2BAAY,CAACC,OAAO,EAAE;EAC5B;EAESC,WAAW;IAClB,OAAO,CAACF,2BAAI,2BAAY,CAACG,MAAM;EACjC;EAESV,OAAO;;IACd,OAAO,iCAAI,wBAAS,mCAAI,IAAI;EAC9B;EAES,MAAMW,6BAA6B,CAC1CC,QAAgC;IAEhC,OAAO,IAAIC,kCAAc,CAACN,2BAAI,2BAAY,CAAC;EAC7C;;AAzCFO","names":["Browser","Browser_js_1","constructor","opts","_Browser_process","_Browser_closeCallback","_Browser_connection","__classPrivateFieldSet","process","closeCallback","connection","create","send","close","call","__classPrivateFieldGet","dispose","isConnected","closed","createIncognitoBrowserContext","_options","BrowserContext_js_1","exports"],"sources":["../../../../../src/common/bidi/Browser.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}