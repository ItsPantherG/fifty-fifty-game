{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNode } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { debug } from './Debug.js';\nimport { ElementHandle } from './ElementHandle.js';\nimport { TimeoutError } from './Errors.js';\nimport { JSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n/**\n * @internal\n */\nexport function getExceptionMessage(exceptionDetails) {\n  if (exceptionDetails.exception) {\n    return exceptionDetails.exception.description || exceptionDetails.exception.value;\n  }\n  let message = exceptionDetails.text;\n  if (exceptionDetails.stackTrace) {\n    for (const callframe of exceptionDetails.stackTrace.callFrames) {\n      const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n      const functionName = callframe.functionName || '<anonymous>';\n      message += `\\n    at ${functionName} (${location})`;\n    }\n  }\n  return message;\n}\n/**\n * @internal\n */\nexport function valueFromRemoteObject(remoteObject) {\n  assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint' && typeof BigInt !== 'undefined') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n  return remoteObject.value;\n}\n/**\n * @internal\n */\nexport async function releaseObject(client, remoteObject) {\n  if (!remoteObject.objectId) {\n    return;\n  }\n  await client.send('Runtime.releaseObject', {\n    objectId: remoteObject.objectId\n  }).catch(error => {\n    // Exceptions might happen in case of a page been navigated or closed.\n    // Swallow these since they are harmless and we don't leak anything in this case.\n    debugError(error);\n  });\n}\n/**\n * @internal\n */\nexport function addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\n/**\n * @internal\n */\nexport function removeEventListeners(listeners) {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\n/**\n * @internal\n */\nexport const isString = obj => {\n  return typeof obj === 'string' || obj instanceof String;\n};\n/**\n * @internal\n */\nexport const isNumber = obj => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\n/**\n * @internal\n */\nexport async function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n  let eventTimeout;\n  let resolveCallback;\n  let rejectCallback;\n  const promise = new Promise((resolve, reject) => {\n    resolveCallback = resolve;\n    rejectCallback = reject;\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (!(await predicate(event))) {\n      return;\n    }\n    resolveCallback(event);\n  });\n  if (timeout) {\n    eventTimeout = setTimeout(() => {\n      rejectCallback(new TimeoutError('Timeout exceeded while waiting for event'));\n    }, timeout);\n  }\n  function cleanup() {\n    removeEventListeners([listener]);\n    clearTimeout(eventTimeout);\n  }\n  const result = await Promise.race([promise, abortPromise]).then(r => {\n    cleanup();\n    return r;\n  }, error => {\n    cleanup();\n    throw error;\n  });\n  if (isErrorLike(result)) {\n    throw result;\n  }\n  return result;\n}\n/**\n * @internal\n */\nexport function createJSHandle(context, remoteObject) {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new ElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new JSHandle(context, remoteObject);\n}\n/**\n * @internal\n */\nexport function evaluationString(fun) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  if (isString(fun)) {\n    assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n/**\n * @internal\n */\nexport function pageBindingInitString(type, name) {\n  function addPageBinding(type, name) {\n    // This is the CDP binding.\n    // @ts-expect-error: In a different context.\n    const callCDP = self[name];\n    // We replace the CDP binding with a Puppeteer binding.\n    Object.assign(self, {\n      [name]() {\n        var _a, _b;\n        // This is the Puppeteer binding.\n        // @ts-expect-error: In a different context.\n        const callPuppeteer = self[name];\n        (_a = callPuppeteer.callbacks) !== null && _a !== void 0 ? _a : callPuppeteer.callbacks = new Map();\n        const seq = ((_b = callPuppeteer.lastSeq) !== null && _b !== void 0 ? _b : 0) + 1;\n        callPuppeteer.lastSeq = seq;\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        callCDP(JSON.stringify({\n          type,\n          name,\n          seq,\n          args\n        }));\n        return new Promise((resolve, reject) => {\n          callPuppeteer.callbacks.set(seq, {\n            resolve,\n            reject\n          });\n        });\n      }\n    });\n  }\n  return evaluationString(addPageBinding, type, name);\n}\n/**\n * @internal\n */\nexport function pageBindingDeliverResultString(name, seq, result) {\n  function deliverResult(name, seq, result) {\n    window[name].callbacks.get(seq).resolve(result);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverResult, name, seq, result);\n}\n/**\n * @internal\n */\nexport function pageBindingDeliverErrorString(name, seq, message, stack) {\n  function deliverError(name, seq, message, stack) {\n    const error = new Error(message);\n    error.stack = stack;\n    window[name].callbacks.get(seq).reject(error);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverError, name, seq, message, stack);\n}\n/**\n * @internal\n */\nexport function pageBindingDeliverErrorValueString(name, seq, value) {\n  function deliverErrorValue(name, seq, value) {\n    window[name].callbacks.get(seq).reject(value);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverErrorValue, name, seq, value);\n}\n/**\n * @internal\n */\nexport async function waitWithTimeout(promise, taskName, timeout) {\n  let reject;\n  const timeoutError = new TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n  const timeoutPromise = new Promise((_res, rej) => {\n    return reject = rej;\n  });\n  let timeoutTimer = null;\n  if (timeout) {\n    timeoutTimer = setTimeout(() => {\n      return reject(timeoutError);\n    }, timeout);\n  }\n  try {\n    return await Promise.race([promise, timeoutPromise]);\n  } finally {\n    if (timeoutTimer) {\n      clearTimeout(timeoutTimer);\n    }\n  }\n}\n/**\n * @internal\n */\nlet fs = null;\n/**\n * @internal\n */\nexport async function importFS() {\n  if (!fs) {\n    fs = await import('fs');\n  }\n  return fs;\n}\n/**\n * @internal\n */\nexport async function getReadableAsBuffer(readable, path) {\n  const buffers = [];\n  if (path) {\n    let fs;\n    try {\n      fs = (await importFS()).promises;\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error('Cannot write to a path outside of a Node-like environment.');\n      }\n      throw error;\n    }\n    const fileHandle = await fs.open(path, 'w+');\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n      await fileHandle.writeFile(chunk);\n    }\n    await fileHandle.close();\n  } else {\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n    }\n  }\n  try {\n    return Buffer.concat(buffers);\n  } catch (error) {\n    return null;\n  }\n}\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(client, handle) {\n  // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n  // ReadableStream.\n  if (!isNode) {\n    throw new Error('Cannot create a stream outside of Node.js environment.');\n  }\n  const {\n    Readable\n  } = await import('stream');\n  let eof = false;\n  return new Readable({\n    async read(size) {\n      if (eof) {\n        return;\n      }\n      const response = await client.send('IO.read', {\n        handle,\n        size\n      });\n      this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n      if (response.eof) {\n        eof = true;\n        await client.send('IO.close', {\n          handle\n        });\n        this.push(null);\n      }\n    }\n  });\n}","map":{"version":3,"mappings":"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","names":["isNode","assert","isErrorLike","debug","ElementHandle","TimeoutError","JSHandle","debugError","getExceptionMessage","exceptionDetails","exception","description","value","message","text","stackTrace","callframe","callFrames","location","url","lineNumber","columnNumber","functionName","valueFromRemoteObject","remoteObject","objectId","unserializableValue","type","BigInt","replace","NaN","Infinity","Error","releaseObject","client","send","catch","error","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","length","isString","obj","String","isNumber","Number","waitForEvent","predicate","timeout","abortPromise","eventTimeout","resolveCallback","rejectCallback","promise","Promise","resolve","reject","event","setTimeout","cleanup","clearTimeout","result","race","then","r","createJSHandle","context","subtype","_world","frame","evaluationString","fun","args","serializeArgument","arg","Object","is","undefined","JSON","stringify","map","join","pageBindingInitString","name","addPageBinding","callCDP","self","assign","callPuppeteer","callbacks","Map","seq","lastSeq","set","pageBindingDeliverResultString","deliverResult","window","get","delete","pageBindingDeliverErrorString","stack","deliverError","pageBindingDeliverErrorValueString","deliverErrorValue","waitWithTimeout","taskName","timeoutError","timeoutPromise","_res","rej","timeoutTimer","fs","importFS","getReadableAsBuffer","readable","path","buffers","promises","TypeError","fileHandle","open","chunk","push","writeFile","close","Buffer","concat","getReadableFromProtocolStream","handle","Readable","eof","read","size","response","data","base64Encoded"],"sources":["../../../../src/common/util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}