{"ast":null,"code":"var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _BrowserWebSocketTransport_ws;\n/**\n * @internal\n */\nexport class BrowserWebSocketTransport {\n  constructor(ws) {\n    _BrowserWebSocketTransport_ws.set(this, void 0);\n    __classPrivateFieldSet(this, _BrowserWebSocketTransport_ws, ws, \"f\");\n    __classPrivateFieldGet(this, _BrowserWebSocketTransport_ws, \"f\").addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    __classPrivateFieldGet(this, _BrowserWebSocketTransport_ws, \"f\").addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    __classPrivateFieldGet(this, _BrowserWebSocketTransport_ws, \"f\").addEventListener('error', () => {});\n  }\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n      ws.addEventListener('open', () => {\n        return resolve(new BrowserWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n  send(message) {\n    __classPrivateFieldGet(this, _BrowserWebSocketTransport_ws, \"f\").send(message);\n  }\n  close() {\n    __classPrivateFieldGet(this, _BrowserWebSocketTransport_ws, \"f\").close();\n  }\n}\n_BrowserWebSocketTransport_ws = new WeakMap();","map":{"version":3,"mappings":";;;;;;;;;;;;AAiBA;;;AAGA,OAAM,MAAOA,yBAAyB;EAgBpCC,YAAYC,EAAa;IAJzBC;IAKEC,2BAAI,iCAAOF,EAAE;IACbG,2BAAI,qCAAI,CAACC,gBAAgB,CAAC,SAAS,EAAEC,KAAK,IAAG;MAC3C,IAAI,IAAI,CAACC,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,CAACC,IAAI,CAAC,IAAI,EAAEF,KAAK,CAACG,IAAI,CAAC;;IAEzC,CAAC,CAAC;IACFL,2BAAI,qCAAI,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAK;MACtC,IAAI,IAAI,CAACK,OAAO,EAAE;QAChB,IAAI,CAACA,OAAO,CAACF,IAAI,CAAC,IAAI,CAAC;;IAE3B,CAAC,CAAC;IACF;IACAJ,2BAAI,qCAAI,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAK,CAAE,CAAC,CAAC;EAC9C;EA7BA,OAAOM,MAAM,CAACC,GAAW;IACvB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;MACrC,MAAMd,EAAE,GAAG,IAAIe,SAAS,CAACJ,GAAG,CAAC;MAE7BX,EAAE,CAACI,gBAAgB,CAAC,MAAM,EAAE,MAAK;QAC/B,OAAOS,OAAO,CAAC,IAAIf,yBAAyB,CAACE,EAAE,CAAC,CAAC;MACnD,CAAC,CAAC;MACFA,EAAE,CAACI,gBAAgB,CAAC,OAAO,EAAEU,MAAM,CAAC;IACtC,CAAC,CAAC;EACJ;EAsBAE,IAAI,CAACC,OAAe;IAClBd,2BAAI,qCAAI,CAACa,IAAI,CAACC,OAAO,CAAC;EACxB;EAEAC,KAAK;IACHf,2BAAI,qCAAI,CAACe,KAAK,EAAE;EAClB","names":["BrowserWebSocketTransport","constructor","ws","_BrowserWebSocketTransport_ws","__classPrivateFieldSet","__classPrivateFieldGet","addEventListener","event","onmessage","call","data","onclose","create","url","Promise","resolve","reject","WebSocket","send","message","close"],"sources":["../../../../src/common/BrowserWebSocketTransport.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}