{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getReadableFromProtocolStream = exports.getReadableAsBuffer = exports.importFS = exports.waitWithTimeout = exports.pageBindingDeliverErrorValueString = exports.pageBindingDeliverErrorString = exports.pageBindingDeliverResultString = exports.pageBindingInitString = exports.evaluationString = exports.createJSHandle = exports.waitForEvent = exports.isNumber = exports.isString = exports.removeEventListeners = exports.addEventListener = exports.releaseObject = exports.valueFromRemoteObject = exports.getExceptionMessage = exports.debugError = void 0;\nconst environment_js_1 = require(\"../environment.js\");\nconst assert_js_1 = require(\"../util/assert.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\nconst Debug_js_1 = require(\"./Debug.js\");\nconst ElementHandle_js_1 = require(\"./ElementHandle.js\");\nconst Errors_js_1 = require(\"./Errors.js\");\nconst JSHandle_js_1 = require(\"./JSHandle.js\");\n/**\n * @internal\n */\nexports.debugError = (0, Debug_js_1.debug)('puppeteer:error');\n/**\n * @internal\n */\nfunction getExceptionMessage(exceptionDetails) {\n  if (exceptionDetails.exception) {\n    return exceptionDetails.exception.description || exceptionDetails.exception.value;\n  }\n  let message = exceptionDetails.text;\n  if (exceptionDetails.stackTrace) {\n    for (const callframe of exceptionDetails.stackTrace.callFrames) {\n      const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n      const functionName = callframe.functionName || '<anonymous>';\n      message += `\\n    at ${functionName} (${location})`;\n    }\n  }\n  return message;\n}\nexports.getExceptionMessage = getExceptionMessage;\n/**\n * @internal\n */\nfunction valueFromRemoteObject(remoteObject) {\n  (0, assert_js_1.assert)(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint' && typeof BigInt !== 'undefined') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n  return remoteObject.value;\n}\nexports.valueFromRemoteObject = valueFromRemoteObject;\n/**\n * @internal\n */\nasync function releaseObject(client, remoteObject) {\n  if (!remoteObject.objectId) {\n    return;\n  }\n  await client.send('Runtime.releaseObject', {\n    objectId: remoteObject.objectId\n  }).catch(error => {\n    // Exceptions might happen in case of a page been navigated or closed.\n    // Swallow these since they are harmless and we don't leak anything in this case.\n    (0, exports.debugError)(error);\n  });\n}\nexports.releaseObject = releaseObject;\n/**\n * @internal\n */\nfunction addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\nexports.addEventListener = addEventListener;\n/**\n * @internal\n */\nfunction removeEventListeners(listeners) {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\nexports.removeEventListeners = removeEventListeners;\n/**\n * @internal\n */\nconst isString = obj => {\n  return typeof obj === 'string' || obj instanceof String;\n};\nexports.isString = isString;\n/**\n * @internal\n */\nconst isNumber = obj => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\nexports.isNumber = isNumber;\n/**\n * @internal\n */\nasync function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n  let eventTimeout;\n  let resolveCallback;\n  let rejectCallback;\n  const promise = new Promise((resolve, reject) => {\n    resolveCallback = resolve;\n    rejectCallback = reject;\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (!(await predicate(event))) {\n      return;\n    }\n    resolveCallback(event);\n  });\n  if (timeout) {\n    eventTimeout = setTimeout(() => {\n      rejectCallback(new Errors_js_1.TimeoutError('Timeout exceeded while waiting for event'));\n    }, timeout);\n  }\n  function cleanup() {\n    removeEventListeners([listener]);\n    clearTimeout(eventTimeout);\n  }\n  const result = await Promise.race([promise, abortPromise]).then(r => {\n    cleanup();\n    return r;\n  }, error => {\n    cleanup();\n    throw error;\n  });\n  if ((0, ErrorLike_js_1.isErrorLike)(result)) {\n    throw result;\n  }\n  return result;\n}\nexports.waitForEvent = waitForEvent;\n/**\n * @internal\n */\nfunction createJSHandle(context, remoteObject) {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new ElementHandle_js_1.ElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new JSHandle_js_1.JSHandle(context, remoteObject);\n}\nexports.createJSHandle = createJSHandle;\n/**\n * @internal\n */\nfunction evaluationString(fun) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  if ((0, exports.isString)(fun)) {\n    (0, assert_js_1.assert)(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\nexports.evaluationString = evaluationString;\n/**\n * @internal\n */\nfunction pageBindingInitString(type, name) {\n  function addPageBinding(type, name) {\n    // This is the CDP binding.\n    // @ts-expect-error: In a different context.\n    const callCDP = self[name];\n    // We replace the CDP binding with a Puppeteer binding.\n    Object.assign(self, {\n      [name]() {\n        var _a, _b;\n        // This is the Puppeteer binding.\n        // @ts-expect-error: In a different context.\n        const callPuppeteer = self[name];\n        (_a = callPuppeteer.callbacks) !== null && _a !== void 0 ? _a : callPuppeteer.callbacks = new Map();\n        const seq = ((_b = callPuppeteer.lastSeq) !== null && _b !== void 0 ? _b : 0) + 1;\n        callPuppeteer.lastSeq = seq;\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        callCDP(JSON.stringify({\n          type,\n          name,\n          seq,\n          args\n        }));\n        return new Promise((resolve, reject) => {\n          callPuppeteer.callbacks.set(seq, {\n            resolve,\n            reject\n          });\n        });\n      }\n    });\n  }\n  return evaluationString(addPageBinding, type, name);\n}\nexports.pageBindingInitString = pageBindingInitString;\n/**\n * @internal\n */\nfunction pageBindingDeliverResultString(name, seq, result) {\n  function deliverResult(name, seq, result) {\n    window[name].callbacks.get(seq).resolve(result);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverResult, name, seq, result);\n}\nexports.pageBindingDeliverResultString = pageBindingDeliverResultString;\n/**\n * @internal\n */\nfunction pageBindingDeliverErrorString(name, seq, message, stack) {\n  function deliverError(name, seq, message, stack) {\n    const error = new Error(message);\n    error.stack = stack;\n    window[name].callbacks.get(seq).reject(error);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverError, name, seq, message, stack);\n}\nexports.pageBindingDeliverErrorString = pageBindingDeliverErrorString;\n/**\n * @internal\n */\nfunction pageBindingDeliverErrorValueString(name, seq, value) {\n  function deliverErrorValue(name, seq, value) {\n    window[name].callbacks.get(seq).reject(value);\n    window[name].callbacks.delete(seq);\n  }\n  return evaluationString(deliverErrorValue, name, seq, value);\n}\nexports.pageBindingDeliverErrorValueString = pageBindingDeliverErrorValueString;\n/**\n * @internal\n */\nasync function waitWithTimeout(promise, taskName, timeout) {\n  let reject;\n  const timeoutError = new Errors_js_1.TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n  const timeoutPromise = new Promise((_res, rej) => {\n    return reject = rej;\n  });\n  let timeoutTimer = null;\n  if (timeout) {\n    timeoutTimer = setTimeout(() => {\n      return reject(timeoutError);\n    }, timeout);\n  }\n  try {\n    return await Promise.race([promise, timeoutPromise]);\n  } finally {\n    if (timeoutTimer) {\n      clearTimeout(timeoutTimer);\n    }\n  }\n}\nexports.waitWithTimeout = waitWithTimeout;\n/**\n * @internal\n */\nlet fs = null;\n/**\n * @internal\n */\nasync function importFS() {\n  if (!fs) {\n    fs = await Promise.resolve().then(() => __importStar(require('fs')));\n  }\n  return fs;\n}\nexports.importFS = importFS;\n/**\n * @internal\n */\nasync function getReadableAsBuffer(readable, path) {\n  const buffers = [];\n  if (path) {\n    let fs;\n    try {\n      fs = (await importFS()).promises;\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error('Cannot write to a path outside of a Node-like environment.');\n      }\n      throw error;\n    }\n    const fileHandle = await fs.open(path, 'w+');\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n      await fileHandle.writeFile(chunk);\n    }\n    await fileHandle.close();\n  } else {\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n    }\n  }\n  try {\n    return Buffer.concat(buffers);\n  } catch (error) {\n    return null;\n  }\n}\nexports.getReadableAsBuffer = getReadableAsBuffer;\n/**\n * @internal\n */\nasync function getReadableFromProtocolStream(client, handle) {\n  // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n  // ReadableStream.\n  if (!environment_js_1.isNode) {\n    throw new Error('Cannot create a stream outside of Node.js environment.');\n  }\n  const {\n    Readable\n  } = await Promise.resolve().then(() => __importStar(require('stream')));\n  let eof = false;\n  return new Readable({\n    async read(size) {\n      if (eof) {\n        return;\n      }\n      const response = await client.send('IO.read', {\n        handle,\n        size\n      });\n      this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n      if (response.eof) {\n        eof = true;\n        await client.send('IO.close', {\n          handle\n        });\n        this.push(null);\n      }\n    }\n  });\n}\nexports.getReadableFromProtocolStream = getReadableFromProtocolStream;","map":{"version":3,"mappings":"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","names":["exports","getExceptionMessage","exceptionDetails","exception","description","value","message","text","stackTrace","callframe","callFrames","location","url","lineNumber","columnNumber","functionName","valueFromRemoteObject","remoteObject","objectId","unserializableValue","type","BigInt","replace","NaN","Infinity","Error","releaseObject","client","send","catch","error","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","length","isString","obj","String","isNumber","Number","waitForEvent","predicate","timeout","abortPromise","eventTimeout","resolveCallback","rejectCallback","promise","Promise","resolve","reject","event","setTimeout","Errors_js_1","cleanup","clearTimeout","result","race","then","r","createJSHandle","context","subtype","_world","ElementHandle_js_1","frame","JSHandle_js_1","evaluationString","fun","args","serializeArgument","arg","Object","is","undefined","JSON","stringify","map","join","pageBindingInitString","name","addPageBinding","callCDP","self","assign","callPuppeteer","callbacks","Map","seq","lastSeq","set","pageBindingDeliverResultString","deliverResult","window","get","delete","pageBindingDeliverErrorString","stack","deliverError","pageBindingDeliverErrorValueString","deliverErrorValue","waitWithTimeout","taskName","timeoutError","timeoutPromise","_res","rej","timeoutTimer","fs","importFS","getReadableAsBuffer","readable","path","buffers","promises","TypeError","fileHandle","open","chunk","push","writeFile","close","Buffer","concat","getReadableFromProtocolStream","handle","environment_js_1","Readable","eof","read","size","response","data","base64Encoded"],"sources":["../../../../src/common/util.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}